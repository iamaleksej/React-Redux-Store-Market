(this["webpackJsonpstore-project"]=this["webpackJsonpstore-project"]||[]).push([[0],{50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var n=c(6),r=c.n(n),a=c(29),s=c.n(a),i=c(21),o=c(26),l=c(3),u=c(5),d=c(9),j=c(10),b=c(11),p=c(15),O=r.a.createContext(),m=O.Provider,f=O.Consumer,h=c(7),_=function(){return function(e){return function(t){return Object(h.jsx)(f,{children:function(c){return Object(h.jsx)(e,Object(p.a)(Object(p.a)({},t),{},{storeService:c}))}})}}},v=function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},x=c(1),g=c.n(x),C=c(4),N=c(2),y=c(13),R=(c(50),v(_(),Object(i.b)(null))((function(e){var t=e.storeService,c=Object(n.useState)({email:null,password:null}),r=Object(y.a)(c,2),a=r[0],s=r[1],i=Object(n.useState)(!1),o=Object(y.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(!1),j=Object(y.a)(d,2),b=j[0],O=j[1],m=function(e){var t=e.target,c=t.value,n=t.id;s((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(N.a)({},n,c))}))},f=function(){var e=Object(C.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setLoginData(a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(C.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setSignInData(a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),v=function(){u((function(e){return!e}))};return Object(h.jsxs)("div",{className:"login",children:[Object(h.jsx)("p",{className:"login__title",onClick:function(){O((function(e){return!e}))},children:"\u0412\u043e\u0439\u0442\u0438"}),b&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"login-blur",onClick:function(){return O(!1)}}),Object(h.jsxs)("div",{className:"login-wrapper",children:[Object(h.jsxs)("div",{className:"login__inputs",children:[Object(h.jsx)("input",{type:"text",id:"email",className:"login__input",placeholder:"E-mail",onChange:m}),Object(h.jsx)("input",{type:"password",id:"password",className:"login__input",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:m}),!l&&Object(h.jsx)("div",{className:"login__btn",onClick:_,children:"\u0412\u043e\u0439\u0442\u0438"}),l&&Object(h.jsx)("div",{className:"login__btn",onClick:f,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),l&&Object(h.jsx)("div",{className:"login__text-btn",onClick:v,children:"\u0412\u043e\u0439\u0442\u0438"}),!l&&Object(h.jsx)("div",{className:"login__text-btn",onClick:v,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})]})}))),D=R,T=(c(51),v(_(),Object(i.b)((function(e){var t=e.cart;return{totalPrice:t.totalPrice,totalQuantity:t.totalQuantity}})))((function(e){var t=e.totalQuantity,c=e.totalPrice;return Object(h.jsxs)("header",{className:"header",children:[Object(h.jsxs)("div",{className:"header__logo-login",children:[Object(h.jsx)(o.b,{to:"/React-Redux-Store-Market/",className:"header__logo",children:"Store Project"}),Object(h.jsx)(D,{})]}),Object(h.jsxs)(o.b,{to:"/cart",className:"header__cart",children:[Object(h.jsxs)("span",{className:"header__cart-numbers",children:[" ",t," "]}),"( ",Object(h.jsx)("span",{className:"header__cart-numbers",children:c})," \u20bd )",Object(h.jsx)("div",{className:"header__cart-image",children:Object(h.jsx)("img",{className:"image",src:"https://firebasestorage.googleapis.com/v0/b/store-project-de72e.appspot.com/o/store-project%2Fimages%2Fcart-icon.png?alt=media&token=df1d55e1-d77d-47d6-97f1-c9e0dc2a5d09",alt:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430:"})})]})]})}))),E=(c(52),function(e){var t=e.product,c=e.onAddedToCart,n=t.name,r=t.price,a=t.image,s=t.description;return Object(h.jsxs)("div",{className:"product-list__item",children:[Object(h.jsx)("div",{className:"product-list__image",children:Object(h.jsx)("img",{className:"image",src:a,alt:n})}),Object(h.jsx)("h3",{className:"product-list__name",children:n}),Object(h.jsxs)("p",{className:"product-list__price",children:[r,Object(h.jsx)("sup",{className:"product-list__ruble",children:"\u20bd"})]}),Object(h.jsx)("p",{className:"product-list__description",children:s}),Object(h.jsx)("button",{onClick:c,className:"product-list__btn",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})}),S=(c(53),function(){return Object(h.jsx)("div",{children:"Loading..."})}),k=(c(54),function(){return Object(h.jsx)("div",{children:"Error!"})}),P=function(e){return{type:"FETCH_PRODUCTS_FAILURE",payload:e}},A=function(e){return{type:"PRODUCT_ADDED_TO_CART",payload:e}},w=(c(55),function(e){var t=e.filter,c=e.visibleAllItems,n=e.visibleFilterItems;return"all"!==t?n:c}),F=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(){return Object(l.a)(this,c),t.apply(this,arguments)}return Object(u.a)(c,[{key:"componentDidMount",value:function(){var e=this.props,t=e.storeService,c=e.productsLoaded;(0,e.productsRequested)(),t.getProducts(c),P()}},{key:"render",value:function(){var e=this.props,t=e.products,c=e.loading,n=e.error,r=e.onAddedToCart,a=e.filter;if(c)return Object(h.jsx)(S,{});if(n)return Object(h.jsx)(k,{});var s=Object.values(t).map((function(e){if(e.category===a)return Object(h.jsxs)("div",{className:"product-list_wrapper",children:[Object(h.jsx)("h2",{className:"product-list__title",children:e.title}),Object(h.jsx)(h.Fragment,{children:Object.values(e).map((function(e){if("object"===typeof e)return Object(h.jsx)("ul",{className:"product-list",children:Object.values(e).map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(E,{product:e,onAddedToCart:function(){return r(e.id)}})},e.id)}))})}))})]})})),i=Object.values(t).map((function(e){return Object(h.jsxs)("div",{className:"product-list_wrapper",children:[Object(h.jsx)("h2",{className:"product-list__title",children:e.title}),Object(h.jsx)(h.Fragment,{children:Object.values(e).map((function(e){if("object"===typeof e)return Object(h.jsx)("ul",{className:"product-list",children:Object.values(e).map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(E,{product:e,onAddedToCart:function(){return r(e.id)}})},e.id)}))})}))})]})}));return Object(h.jsx)(w,{products:t,filter:a,visibleAllItems:i,visibleFilterItems:s,onAddedToCart:r})}}]),c}(n.Component),I={productsLoaded:function(e){return{type:"FETCH_PRODUCTS_SUCCESS",payload:e}},productsRequested:function(){return{type:"FETCH_PRODUCTS_REQUEST"}},productsError:P,onAddedToCart:function(e){return A(e)}},L=v(_(),Object(i.b)((function(e){var t=e.productList;return{products:t.products,loading:t.loading,error:t.error,filter:t.filter}}),I))(F),U=(c(56),function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(){var e;Object(l.a)(this,c);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).buttons=[{name:"all",label:"\u0412\u0441\u0435"},{name:"burgers",label:"\u0411\u0443\u0440\u0433\u0435\u0440\u044b"},{name:"drinks",label:"\u041d\u0430\u043f\u0438\u0442\u043a\u0438"},{name:"salads",label:"\u0421\u0430\u043b\u0430\u0442\u044b"},{name:"sauces",label:"\u0421\u043e\u0443\u0441\u044b"},{name:"snacks",label:"\u0417\u0430\u043a\u0443\u0441\u043a\u0438"}],e}return Object(u.a)(c,[{key:"render",value:function(){var e=this.props,t=e.filter,c=e.onFilterChange,n=this.buttons.map((function(e){var n=e.name,r=e.label,a=t===n?"filter-btn-active":"";return Object(h.jsx)("div",{className:"filter-buttons__item ".concat(a),onClick:function(){return c(n)},children:r},n)}));return Object(h.jsx)("div",{className:"filter-buttons",children:n})}}]),c}(r.a.Component)),M={onFilterChange:function(e){return{type:"PRODUCTS_FILTERED",payload:e}}},Q=Object(i.b)((function(e){return{filter:e.productList.filter}}),M)(U),H=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Q,{}),Object(h.jsx)(L,{})]})},B=(c(57),{onIncrease:A,onDecrease:function(e){return{type:"PRODUCT_REMOVED_FROM_CART",payload:e}},onDelete:function(e){return{type:"ALL_PRODUCT_REMOVED_FROM_CART",payload:e}}}),V=v(_(),Object(i.b)((function(e){var t=e.cart;return{cartItems:t.cartItems,totalPrice:t.totalPrice}}),B))((function(e){var t=e.totalPrice,c=e.cartItems,r=e.onIncrease,a=e.onDecrease,s=e.onDelete,i=e.storeService,o=Object(n.useState)({clientName:null,clientAdress:null,clientPhone:null}),l=Object(y.a)(o,2),u=l[0],d=l[1],j=function(e){var t=e.target,c=t.value,n=t.id;d((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(N.a)({},n,c))}))},b=function(){var e=Object(C.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.setOrderData(u,c,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"cart",children:[Object(h.jsx)("h1",{className:"cart__title",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(h.jsx)("h2",{className:"cart__subtitle",children:c.length?"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437":"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}),Object(h.jsx)("div",{className:"cart-products",children:Object.values(c).map((function(e){var t=e.id,c=e.image,n=e.name,i=e.count,o=e.price;return Object(h.jsxs)("div",{className:"cart-products__item",children:[Object(h.jsx)("div",{className:"cart-products__image",children:Object(h.jsx)("img",{className:"image",src:c,alt:n})}),Object(h.jsx)("div",{className:"cart-products__remove",onClick:function(){return s(t)},children:"\xd7"}),Object(h.jsx)("div",{className:"cart-products__name",children:n}),Object(h.jsxs)("div",{className:"cart-products__counter",children:[Object(h.jsx)("div",{className:"cart-products__counter-less",onClick:function(){return a(t)},children:"\u2013"}),Object(h.jsx)("div",{className:"cart-products__counter-number",children:i}),Object(h.jsx)("div",{className:"cart-products__counter-more",onClick:function(){return r(t)},children:"+"})]}),Object(h.jsxs)("div",{className:"cart-products__price",children:[o,Object(h.jsx)("sup",{className:"cart-products__ruble",children:"\u20bd"})]})]})}))}),Object(h.jsxs)("h2",{className:"cart__subtitle mt50px",children:["\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",Object(h.jsxs)("span",{className:"fw600 text_orange",children:[" ",t," "]})," ",Object(h.jsx)("span",{className:"fw300",children:"\u20bd"})]}),Object(h.jsxs)("div",{className:"client-data",children:[Object(h.jsx)("input",{type:"text",id:"clientName",placeholder:"\u0418\u043c\u044f",className:"client-data__item client-data__name",onChange:j}),Object(h.jsx)("input",{type:"text",id:"clientAdress",placeholder:"\u0410\u0434\u0440\u0435\u0441",className:"client-data__item client-data__adress",onChange:j}),Object(h.jsx)("input",{type:"phone",id:"clientPhone",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",className:"client-data__item client-data__phone",onChange:j}),Object(h.jsxs)("p",{className:"client-data__price",children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0430: ",t," \u20bd"]}),Object(h.jsx)("button",{type:"submit",className:"client-data__btn-sumbit",onClick:b,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})})),q=(c(58),function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(){return Object(l.a)(this,c),t.apply(this,arguments)}return Object(u.a)(c,[{key:"render",value:function(){return Object(h.jsxs)("main",{role:"main",className:"container",children:[Object(h.jsx)(T,{}),Object(h.jsxs)(b.c,{children:[Object(h.jsx)(b.a,{path:"/React-Redux-Store-Market/",element:Object(h.jsx)(H,{})}),Object(h.jsx)(b.a,{path:"/cart",element:Object(h.jsx)(V,{})})]})]})}}]),c}(r.a.Component)),z=q,J=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(){var e;Object(l.a)(this,c);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(u.a)(c,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(h.jsx)(k,{}):this.props.children}}]),c}(n.Component),K=J,Z=c(34),G=c(31),W=(c(62),c(28));Z.a.initializeApp({apiKey:"AIzaSyClbTF7AS0ZDhMBpwUsZpPGSil-blSQfTw",authDomain:"store-project-de72e.firebaseapp.com",databaseURL:"https://store-project-de72e-default-rtdb.firebaseio.com",projectId:"store-project-de72e",storageBucket:"store-project-de72e.appspot.com",messagingSenderId:"222931642761",appId:"1:222931642761:web:99fbd6db2fa3d800465958"});var X=function e(){var t=this;Object(l.a)(this,e),this.getProducts=function(e){t.database.ref("/storeData/").orderByKey().on("value",(function(t){e(t.val())}))},this.setOrderData=function(e,t,c){var n=e.clientName,r=e.clientAdress,a=e.clientPhone,s=Object(G.a)();Object(G.c)(Object(G.b)(s,"clientData/order"),{clientname:n,clientphone:a,clientadress:r,totalprice:c,cartitems:t})},this.setRegData=function(e){var t=e.email,c=e.password,n=Object(W.b)();Object(W.a)(n,t,c).then((function(e){e.user})).catch((function(e){return console.log(e.code)}))},this.setSignInData=function(e){var t=e.email,c=e.password,n=Object(W.b)();Object(W.c)(n,t,c).then((function(e){e.user})).catch((function(e){return console.log(e)}))},this.firebase=Z.a,this.database=this.firebase.database()},Y=c(36),$=function(e,t){if(void 0===e)return{products:{},loading:!1,error:null,filter:"all"};switch(t.type){case"FETCH_PRODUCTS_REQUEST":return Object(p.a)(Object(p.a)({},e.productList),{},{loading:!0});case"FETCH_PRODUCTS_SUCCESS":return Object(p.a)(Object(p.a)({},e.productList),{},{loading:!1,products:t.payload});case"FETCH_PRODUCTS_FAILURE":return Object(p.a)(Object(p.a)({},e.productList),{},{error:t.payload});case"PRODUCTS_FILTERED":return Object(p.a)(Object(p.a)({},e.productList),{},{filter:t.payload});default:return e.productList}},ee=c(17),te=function(e,t,c){return 0===t.count?[].concat(Object(ee.a)(e.slice(0,c)),Object(ee.a)(e.slice(c+1))):-1===c?[].concat(Object(ee.a)(e),[t]):[].concat(Object(ee.a)(e.slice(0,c)),[t],Object(ee.a)(e.slice(c+1)))},ce=0,ne=0,re=function(e,t,c){var n,r,a=e.productList.products,s=e.cart.cartItems;Object.values(a).map((function(e){return Object.values(e).map((function(e){if("object"===typeof e)return Object.values(e).find((function(e){e.id===t&&(r=e)}))}))}));var i=s.findIndex((function(e){return e.id===t})),o=s[i];n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,n=t.id,r=void 0===n?e.id:n,a=t.image,s=void 0===a?e.image:a,i=t.name,o=void 0===i?e.name:i,l=t.count,u=void 0===l?0:l,d=t.price;return{id:r,image:s,name:o,count:u+c,price:(void 0===d?0:d)+c*e.price}}(r,o,c);return{cartItems:te(s,n,i),totalPrice:function(e,t){return 0===e.count?ce+=r.price*t:ce+=e.price/e.count*t}(n,c),totalQuantity:function(e){return ne+=e}(c)}},ae=function(e,t){if(void 0===e)return{cartItems:[],totalPrice:0,totalQuantity:0};switch(t.type){case"PRODUCT_ADDED_TO_CART":return re(e,t.payload,1);case"PRODUCT_REMOVED_FROM_CART":return re(e,t.payload,-1);case"ALL_PRODUCT_REMOVED_FROM_CART":var c=e.cart.cartItems.find((function(e){return e.id===t.payload}));return re(e,t.payload,-c.count);default:return e.cart}},se=function(e,t){return{productList:$(e,t),cart:ae(e,t)}},ie=Object(Y.a)(se),oe=new X;s.a.render(Object(h.jsx)(i.a,{store:ie,children:Object(h.jsx)(K,{children:Object(h.jsx)(m,{value:oe,children:Object(h.jsx)(o.a,{children:Object(h.jsx)(z,{})})})})}),document.getElementById("wrapper"))}},[[61,1,2]]]);
//# sourceMappingURL=main.abdc7ed1.chunk.js.map